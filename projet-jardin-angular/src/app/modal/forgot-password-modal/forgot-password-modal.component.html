<div *ngIf="isOpen" class="modal-overlay">
    <div class="modal-content">
        <span class="modal-close" (click)="fermer()">✕</span>
        <h2>Mot de passe oublié</h2>

        <p *ngIf="error" class="error">{{ error }}</p>
        
        <div class="form-container" *ngIf="step === 1">
            <label>Entrez votre login</label>
            <input class="input" [(ngModel)]="login" type="text" placeholder="login" />
            <button (click)="sendCode()" [disabled]="loading">
                {{ loading ? 'Envoi...' : 'Envoyer le code' }}
            </button>
        </div>

        <div class="form-container" *ngIf="step === 2">
            <label>Code reçu par email</label>
            <input class="input" [(ngModel)]="code" type="text" placeholder="XXXXXX" />
            <button (click)="verifyCode()">Vérifier</button>
        </div>

        <div class="form-container" *ngIf="step === 3">
            <label>Nouveau mot de passe</label>
            <input class="input" [(ngModel)]="newPassword" type="password" placeholder="Mot de passe" />
            <label>Confirmer le mot de passe</label>
            <input class="input" [(ngModel)]="confirmPassword" type="password"
                placeholder="Confirmation du mot de passe" />
            <button (click)="resetPassword()">Réinitialiser</button>
        </div>
    </div>
</div>